<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ì±„ìš©ì •ë³´ ê²Œì‹œíŒ - ë¸Œë ˆì¸ë„·</title>
<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        line-height: 1.6; 
        color: #333; 
        background-color: #ffffff; 
    }
    .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
    
    /* í—¤ë” ìŠ¤íƒ€ì¼ (ê¸°ì¡´ê³¼ ë™ì¼) */
    .global-nav {
        background: #0f172a;
        color: #fff;
        font-size: 14px;
    }
    .global-nav .container {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        padding: .4rem 20px;
    }
    .global-nav-links {
        list-style: none;
        display: flex;
        gap: 1.25rem;
    }
    .global-nav a {
        color: #fff;
        text-decoration: none;
        opacity: .9;
        transition: opacity .2s ease;
    }
    .global-nav a:hover { opacity: 1; }
    .global-nav .cta-link {
        background: #e11d48;
        padding: .35rem .75rem;
        border-radius: 999px;
        font-weight: 600;
    }
    
    header {
        background: #fff;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin-bottom: 2rem;
    }
    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 0;
    }
    .logo {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .logo img {
        height: 50px;
        width: auto;
        object-fit: contain;
    }
    nav a {
        text-decoration: none;
        color: #333;
        font-weight: 500;
        margin-right: 2rem;
        font-size: 1.44rem;
    }
    nav a:hover { color: #3498db; }
    
    /* ê²Œì‹œíŒ ì „ìš© ìŠ¤íƒ€ì¼ */
    .board-container { 
        padding: 2rem 0; 
        min-height: 70vh;
    }
    .board-header { 
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        margin-bottom: 2rem; 
    }
    .board-title { 
        font-size: 2rem; 
        color: #2c3e50; 
    }
    .btn-add { 
        background: #3498db; 
        color: white; 
        padding: 0.75rem 1.5rem; 
        border: none; 
        border-radius: 5px; 
        cursor: pointer; 
        font-weight: bold;
        font-size: 1rem;
    }
    .btn-add:hover { 
        background: #2980b9; 
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    
    /* í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
    .board-table { 
        width: 100%; 
        border-collapse: collapse; 
        background: white; 
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        border-radius: 8px;
        overflow: hidden;
    }
    .board-table th { 
        background: #f8f9fa; 
        padding: 1rem; 
        text-align: left; 
        border-bottom: 2px solid #dee2e6;
        font-weight: 600;
        color: #495057;
    }
    .board-table td { 
        padding: 1rem; 
        border-bottom: 1px solid #dee2e6; 
    }
    .board-table tbody tr:hover { 
        background: #f8f9fa; 
        cursor: pointer;
    }
    .board-table tbody tr:last-child td {
        border-bottom: none;
    }
    
    .job-image { 
        width: 60px; 
        height: 60px; 
        object-fit: contain;
        border: 1px solid #e9ecef;
        border-radius: 4px;
        padding: 4px;
    }
    .btn-edit, .btn-delete { 
        padding: 0.5rem 1rem; 
        margin-right: 0.5rem; 
        border: none; 
        border-radius: 4px; 
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.2s;
    }
    .btn-edit { 
        background: #ffa94d; 
        color: white; 
    }
    .btn-edit:hover {
        background: #ff922b;
    }
    .btn-delete { 
        background: #e74c3c; 
        color: white; 
    }
    .btn-delete:hover {
        background: #c0392b;
    }
    
    /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    .modal { 
        display: none; 
        position: fixed; 
        z-index: 1000; 
        left: 0; 
        top: 0; 
        width: 100%; 
        height: 100%; 
        background: rgba(0,0,0,0.5);
        animation: fadeIn 0.3s;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .modal-content { 
        background: white; 
        margin: 3% auto; 
        padding: 2rem; 
        width: 90%; 
        max-width: 600px; 
        border-radius: 10px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        animation: slideDown 0.3s;
        max-height: 90vh;
        overflow-y: auto;
    }
    @keyframes slideDown {
        from { transform: translateY(-50px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }
    .modal-content h2 {
        margin-bottom: 1.5rem;
        color: #2c3e50;
    }
    .form-group { 
        margin-bottom: 1.5rem; 
    }
    .form-group label { 
        display: block; 
        margin-bottom: 0.5rem; 
        font-weight: bold;
        color: #495057;
    }
    .form-group input, .form-group textarea { 
        width: 100%; 
        padding: 0.75rem; 
        border: 1px solid #ddd; 
        border-radius: 4px;
        font-size: 1rem;
        font-family: inherit;
    }
    .form-group input:focus, .form-group textarea:focus {
        outline: none;
        border-color: #3498db;
        box-shadow: 0 0 0 3px rgba(52,152,219,0.1);
    }
    .btn-submit { 
        background: #3498db; 
        color: white; 
        padding: 0.75rem 1.5rem; 
        border: none; 
        border-radius: 5px; 
        cursor: pointer;
        font-size: 1rem;
        font-weight: bold;
    }
    .btn-submit:hover {
        background: #2980b9;
    }
    .btn-cancel { 
        background: #95a5a6; 
        color: white; 
        padding: 0.75rem 1.5rem; 
        border: none; 
        border-radius: 5px; 
        cursor: pointer; 
        margin-left: 0.5rem;
        font-size: 1rem;
    }
    .btn-cancel:hover {
        background: #7f8c8d;
    }
    
    /* ë¡œë”© ìŠ¤í”¼ë„ˆ */
    .loading {
        text-align: center;
        padding: 2rem;
        color: #95a5a6;
    }
    .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #3498db;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    /* ë¹ˆ ìƒíƒœ */
    .empty-state {
        text-align: center;
        padding: 4rem 2rem;
        color: #95a5a6;
    }
    .empty-state h3 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
    }
    
    /* ë°˜ì‘í˜• */
    @media (max-width: 768px) {
        .board-table {
            font-size: 0.9rem;
        }
        .board-table th, .board-table td {
            padding: 0.75rem 0.5rem;
        }
        .job-image {
            width: 40px;
            height: 40px;
        }
        nav a {
            font-size: 1rem;
            margin-right: 1rem;
        }
    }
</style>
</head>
<body>
<!-- ìƒë‹¨ ê¸€ë¡œë²Œ ë„¤ë¹„ê²Œì´ì…˜ -->
<div class="global-nav">
<div class="container">
<ul class="global-nav-links">
<li><a href="#login">ë¡œê·¸ì¸</a></li>
<li><a href="#signup">íšŒì›ê°€ì…</a></li>
<li><a href="#service-intro">ì„œë¹„ìŠ¤ ì†Œê°œ</a></li>
<li><a class="cta-link" href="#service-apply">ì„œë¹„ìŠ¤ ì‹ ì²­</a></li>
<li><a href="#support">ê³ ê°ì„¼í„°</a></li>
</ul>
</div>
</div>

<header>
<div class="container">
<div class="header-content">
<div class="logo">
<img alt="ë¸Œë ˆì¸ë„· ë¡œê³ " src="./CI2.png" style="height:50px;width:auto;object-fit:contain;"/>
<div class="logo-text"></div>
</div>
<nav>
<a href="index.html">ì±„ìš©ì •ë³´</a>
<a href="board.html" style="color: #3498db;">ê²Œì‹œíŒ</a>
<a href="#">ê³µê³µê¸°ê´€ ì •ë³´</a>
<a href="#">ê³µê³µê¸°ê´€ ë‰´ìŠ¤</a>
<a href="#">ê³µëª¨ì „ ì†Œì‹</a>
<a href="#">ì·¨ì—… ì´ì•¼ê¸°</a>
<a href="#">ë§ˆì´ë©”ë‰´</a>
</nav>
</div>
</div>
</header>

<div class="container board-container">
<div class="board-header">
<h1 class="board-title">ì±„ìš©ì •ë³´ ê²Œì‹œíŒ</h1>
<button class="btn-add" onclick="openAddModal()">+ ì±„ìš©ì •ë³´ ë“±ë¡</button>
</div>

<!-- ë¡œë”© ìƒíƒœ -->
<div id="loading" class="loading">
<div class="spinner"></div>
<p>ë¡œë”© ì¤‘...</p>
</div>

<!-- ë¹ˆ ìƒíƒœ -->
<div id="emptyState" class="empty-state" style="display: none;">
<h3>ë“±ë¡ëœ ì±„ìš©ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
<p>ì²« ë²ˆì§¸ ì±„ìš©ì •ë³´ë¥¼ ë“±ë¡í•´ë³´ì„¸ìš”!</p>
</div>
<div style="margin-bottom: 1rem;">
    <input type="text" id="searchInput" placeholder="ğŸ” ê¸°ê´€ëª… ë˜ëŠ” ì œëª©ìœ¼ë¡œ ê²€ìƒ‰..." 
           style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px;"
           oninput="searchJobs()">

   
<div style="margin-bottom: 1rem;">
    <input type="text" id="searchInput" placeholder="ğŸ” ê¸°ê´€ëª… ë˜ëŠ” ì œëª©ìœ¼ë¡œ ê²€ìƒ‰..." 
           style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px;"
           oninput="searchJobs()">
</div>
   
   
   
<!-- í…Œì´ë¸” -->
<table class="board-table" id="jobTable" style="display: none;">
<thead>
<tr>
<th style="width: 80px;">ë¡œê³ </th>
<th style="width: 150px;">ê¸°ê´€ëª…</th>
<th>ì œëª©</th>
<th style="width: 100px;">ê³ ìš©í˜•íƒœ</th>
<th style="width: 120px;">ê·¼ë¬´ì§€</th>
<th style="width: 120px;">ë§ˆê°ì¼</th>
<th style="width: 120px;">ë“±ë¡ì¼</th>
<th style="width: 180px;">ê´€ë¦¬</th>
</tr>
</thead>
<tbody id="jobTableBody">
<!-- Firebaseì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
</tbody>
</table>
</div>

<!-- ë“±ë¡ ëª¨ë‹¬ -->
<div id="addModal" class="modal">
<div class="modal-content">
<h2>ğŸ“ ì±„ìš©ì •ë³´ ë“±ë¡</h2>
<form onsubmit="addJob(event)">
<div class="form-group">
<label>ì œëª© *</label>
<input type="text" id="add_title" required placeholder="ì˜ˆ: 2025ë…„ ìƒë°˜ê¸° ì‹ ì…ì‚¬ì› ì±„ìš©">
</div>
<div class="form-group">
<label>ê¸°ê´€ëª… *</label>
<input type="text" id="add_company" required placeholder="ì˜ˆ: í•œêµ­ì „ë ¥ê³µì‚¬">
</div>
<div class="form-group">
<label>ê³ ìš©í˜•íƒœ</label>
<input type="text" id="add_job_type" placeholder="ì˜ˆ: ì •ê·œì§">
</div>
<div class="form-group">
<label>ê·¼ë¬´ì§€</label>
<input type="text" id="add_location" placeholder="ì˜ˆ: ì„œìš¸">
</div>
<div class="form-group">
<label>ë§ˆê°ì¼</label>
<input type="date" id="add_deadline">
</div>
<div class="form-group">
<label>ë¡œê³  ì´ë¯¸ì§€ URL</label>
<input type="text" id="add_image_url" placeholder="ì˜ˆ: ./logo.png ë˜ëŠ” https://...">
</div>
<div class="form-group">
<label>ì±„ìš©ê³µê³  ìƒì„¸ URL</label>
<input type="text" id="add_detail_url" placeholder="ì˜ˆ: https://...">
</div>
<button type="submit" class="btn-submit">ë“±ë¡</button>
<button type="button" class="btn-cancel" onclick="closeAddModal()">ì·¨ì†Œ</button>
</form>
</div>
</div>

<!-- ìˆ˜ì • ëª¨ë‹¬ -->
<div id="editModal" class="modal">
<div class="modal-content">
<h2>âœï¸ ì±„ìš©ì •ë³´ ìˆ˜ì •</h2>
<form onsubmit="updateJob(event)">
<input type="hidden" id="edit_id">
<div class="form-group">
<label>ì œëª© *</label>
<input type="text" id="edit_title" required>
</div>
<div class="form-group">
<label>ê¸°ê´€ëª… *</label>
<input type="text" id="edit_company" required>
</div>
<div class="form-group">
<label>ê³ ìš©í˜•íƒœ</label>
<input type="text" id="edit_job_type">
</div>
<div class="form-group">
<label>ê·¼ë¬´ì§€</label>
<input type="text" id="edit_location">
</div>
<div class="form-group">
<label>ë§ˆê°ì¼</label>
<input type="date" id="edit_deadline">
</div>
<div class="form-group">
<label>ë¡œê³  ì´ë¯¸ì§€ URL</label>
<input type="text" id="edit_image_url">
</div>
<div class="form-group">
<label>ì±„ìš©ê³µê³  ìƒì„¸ URL</label>
<input type="text" id="edit_detail_url">
</div>
<button type="submit" class="btn-submit">ìˆ˜ì •</button>
<button type="button" class="btn-cancel" onclick="closeEditModal()">ì·¨ì†Œ</button>
</form>
</div>
</div>

<!-- Firebase SDK -->
<script type="module">
// Firebase 9 ë²„ì „ SDK ê°€ì ¸ì˜¤ê¸°
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
import { getFirestore, collection, addDoc, getDocs, doc, updateDoc, deleteDoc, orderBy, query, Timestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

// â­ ì—¬ê¸°ì— 1ë‹¨ê³„ì—ì„œ ë³µì‚¬í•œ Firebase ì„¤ì •ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”!
const firebaseConfig = {
  apiKey: "AIzaSyD_xdUkbum7f-NzpsDV5hQix5PqrHYYRnI",
  authDomain: "buglerrr-cc059.firebaseapp.com",
  projectId: "buglerrr-cc059",
  storageBucket: "buglerrr-cc059.firebasestorage.app",
  messagingSenderId: "350357208278",
  appId: "1:350357208278:web:4814630a59108733fcdd77"
};

// Firebase ì´ˆê¸°í™”
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// ì „ì—­ìœ¼ë¡œ í•¨ìˆ˜ ë…¸ì¶œ
window.db = db;
window.collection = collection;
window.addDoc = addDoc;
window.getDocs = getDocs;
window.doc = doc;
window.updateDoc = updateDoc;
window.deleteDoc = deleteDoc;
window.orderBy = orderBy;
window.query = query;
window.Timestamp = Timestamp;

// í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
loadJobs();
</script>

<script>
// ì±„ìš©ì •ë³´ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
async function loadJobs() {
    const loading = document.getElementById('loading');
    const emptyState = document.getElementById('emptyState');
    const jobTable = document.getElementById('jobTable');
    const tbody = document.getElementById('jobTableBody');
    
    try {
        loading.style.display = 'block';
        emptyState.style.display = 'none';
        jobTable.style.display = 'none';
        
        const q = query(collection(db, 'jobs'), orderBy('createdAt', 'desc'));
        const querySnapshot = await getDocs(q);
        
        tbody.innerHTML = '';
        
        if (querySnapshot.empty) {
            loading.style.display = 'none';
            emptyState.style.display = 'block';
            return;
        }
        
        querySnapshot.forEach((docSnap) => {
            const job = docSnap.data();
            const tr = document.createElement('tr');
            
            const createdDate = job.createdAt ? new Date(job.createdAt.seconds * 1000).toLocaleDateString('ko-KR') : '-';
            
            tr.innerHTML = `
                <td><img src="${job.imageUrl || './logo.png'}" class="job-image" alt="ë¡œê³ "></td>
                <td>${job.company}</td>
                <td>${job.title}</td>
                <td>${job.jobType || '-'}</td>
                <td>${job.location || '-'}</td>
                <td>${job.deadline || '-'}</td>
                <td>${createdDate}</td>
                <td>
                    <button class="btn-edit" onclick="openEditModal('${docSnap.id}', '${escapeHtml(job.title)}', '${escapeHtml(job.company)}', '${escapeHtml(job.jobType || '')}', '${escapeHtml(job.location || '')}', '${job.deadline || ''}', '${escapeHtml(job.imageUrl || '')}', '${escapeHtml(job.detailUrl || '')}')">ìˆ˜ì •</button>
                    <button class="btn-delete" onclick="deleteJob('${docSnap.id}')">ì‚­ì œ</button>
                </td>
            `;
            tbody.appendChild(tr);
        });
        
        loading.style.display = 'none';
        jobTable.style.display = 'table';
        
    } catch (error) {
        console.error('ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:', error);
        alert('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
        loading.style.display = 'none';
    }
}

// HTML ì´ìŠ¤ì¼€ì´í”„ (XSS ë°©ì§€)
function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML.replace(/'/g, "\\'");
}

// ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸°
function openAddModal() {
    document.getElementById('addModal').style.display = 'block';
}
function closeAddModal() {
    document.getElementById('addModal').style.display = 'none';
    document.querySelector('#addModal form').reset();
}
function openEditModal(id, title, company, jobType, location, deadline, imageUrl, detailUrl) {
    document.getElementById('edit_id').value = id;
    document.getElementById('edit_title').value = title;
    document.getElementById('edit_company').value = company;
    document.getElementById('edit_job_type').value = jobType;
    document.getElementById('edit_location').value = location;
    document.getElementById('edit_deadline').value = deadline;
    document.getElementById('edit_image_url').value = imageUrl;
    document.getElementById('edit_detail_url').value = detailUrl;
    document.getElementById('editModal').style.display = 'block';
}
function closeEditModal() {
    document.getElementById('editModal').style.display = 'none';
}

// ì±„ìš©ì •ë³´ ë“±ë¡
async function addJob(e) {
    e.preventDefault();
    
    const data = {
        title: document.getElementById('add_title').value,
        company: document.getElementById('add_company').value,
        jobType: document.getElementById('add_job_type').value,
        location: document.getElementById('add_location').value,
        deadline: document.getElementById('add_deadline').value,
        imageUrl: document.getElementById('add_image_url').value,
        detailUrl: document.getElementById('add_detail_url').value,
        createdAt: Timestamp.now()
    };
    
    try {
        await addDoc(collection(db, 'jobs'), data);
        alert('âœ… ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
        closeAddModal();
        loadJobs();
    } catch (error) {
        console.error('ë“±ë¡ ì‹¤íŒ¨:', error);
        alert('ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
    }
}

// ì±„ìš©ì •ë³´ ìˆ˜ì •
async function updateJob(e) {
    e.preventDefault();
    
    const id = document.getElementById('edit_id').value;
    const data = {
        title: document.getElementById('edit_title').value,
        company: document.getElementById('edit_company').value,
        jobType: document.getElementById('edit_job_type').value,
        location: document.getElementById('edit_location').value,
        deadline: document.getElementById('edit_deadline').value,
        imageUrl: document.getElementById('edit_image_url').value,
        detailUrl: document.getElementById('edit_detail_url').value
    };
    
    try {
        await updateDoc(doc(db, 'jobs', id), data);
        alert('âœ… ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!');
        closeEditModal();
        loadJobs();
    } catch (error) {
        console.error('ìˆ˜ì • ì‹¤íŒ¨:', error);
        alert('ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
    }
}

// ì±„ìš©ì •ë³´ ì‚­ì œ
async function deleteJob(id) {
    if (!confirm('â— ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
    
    try {
        await deleteDoc(doc(db, 'jobs', id));
        alert('âœ… ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!');
        loadJobs();
    } catch (error) {
        console.error('ì‚­ì œ ì‹¤íŒ¨:', error);
        alert('ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
    }
}

// ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
window.onclick = function(event) {
    if (event.target.classList.contains('modal')) {
        event.target.style.display = 'none';
    }
}

function searchJobs() {
    const input = document.getElementById('searchInput').value.toLowerCase();
    const rows = document.querySelectorAll('#jobTableBody tr');
    
    rows.forEach(row => {
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(input) ? '' : 'none';
    });
}

   
</script>
</body>

</html>

